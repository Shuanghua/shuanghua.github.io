<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CentOS7 ç¼–è¯‘å®‰è£… ss-libev | ğ‘ºğ’‚ğ’.ğ‘´ğ’</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="CentOS7 ç¼–è¯‘æºç å®‰è£… ss-libev">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS7 ç¼–è¯‘å®‰è£… ss-libev">
<meta property="og:url" content="https://moshuanghua.com/2017/10/07/21-ss-libev/index.html">
<meta property="og:site_name" content="ğ‘ºğ’‚ğ’.ğ‘´ğ’">
<meta property="og:description" content="CentOS7 ç¼–è¯‘æºç å®‰è£… ss-libev">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-10-16T09:58:15.356Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CentOS7 ç¼–è¯‘å®‰è£… ss-libev">
<meta name="twitter:description" content="CentOS7 ç¼–è¯‘æºç å®‰è£… ss-libev">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="https://avatars3.githubusercontent.com/u/8361358?s=460&amp;v=4" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ğ‘ºğ’‚ğ’.ğ‘´ğ’</a></h1>
		</hgroup>

		
		<p class="header-subtitle">æŠ€æœ¯ä¸ç”Ÿæ´»å¹¶è‚©ä½œæˆ˜ã€‚</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>èœå•</li>
						<li>æ ‡ç­¾</li>
						
						<li>å‹æƒ…é“¾æ¥</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">å½’æ¡£</a></li>
				        
							<li><a href="/about">å…³äº</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/shuanghua" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/shhua17@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 12.5px;">Java</a> <a href="/tags/Kotlin/" style="font-size: 17.5px;">Kotlin</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/æ‰‹æœº/" style="font-size: 10px;">æ‰‹æœº</a> <a href="/tags/æŠ˜è…¾/" style="font-size: 10px;">æŠ˜è…¾</a> <a href="/tags/æ‚æ–‡/" style="font-size: 10px;">æ‚æ–‡</a> <a href="/tags/ç¡¬ä»¶/" style="font-size: 10px;">ç¡¬ä»¶</a> <a href="/tags/é€šçŸ¥/" style="font-size: 10px;">é€šçŸ¥</a> <a href="/tags/é—²è¯/" style="font-size: 12.5px;">é—²è¯</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://moshuanghua.com">å‹é“¾</a>
			        
			        </div>
				</section>
				

				
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ğ‘ºğ’‚ğ’.ğ‘´ğ’</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://avatars3.githubusercontent.com/u/8361358?s=460&amp;v=4" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ğ‘ºğ’‚ğ’.ğ‘´ğ’</h1>
			</hgroup>
			
			<p class="header-subtitle">æŠ€æœ¯ä¸ç”Ÿæ´»å¹¶è‚©ä½œæˆ˜ã€‚</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">å½’æ¡£</a></li>
		        
					<li><a href="/about">å…³äº</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/shuanghua" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/shhua17@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-21-ss-libev" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/07/21-ss-libev/" class="article-date">
  	<time datetime="2017-10-06T16:00:00.000Z" itemprop="datePublished">2017-10-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CentOS7 ç¼–è¯‘å®‰è£… ss-libev
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Linux/">Linux</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">	
      
	  
		
			<div id="toc" class="toc-article">
			  <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
			  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#å®‰è£…ç¼–è¯‘å·¥å…·"><span class="toc-number">1.</span> <span class="toc-text">å®‰è£…ç¼–è¯‘å·¥å…·</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®‰è£…-SS"><span class="toc-number">2.</span> <span class="toc-text">å®‰è£… SS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#é…ç½®-SS"><span class="toc-number">2.1.</span> <span class="toc-text">é…ç½® SS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é…ç½®é˜²ç«å¢™ç«¯å£"><span class="toc-number">2.2.</span> <span class="toc-text">é…ç½®é˜²ç«å¢™ç«¯å£</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#è¿è¡Œ"><span class="toc-number">3.</span> <span class="toc-text">è¿è¡Œ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é…ç½®å¼€æœºè‡ªå¯"><span class="toc-number">4.</span> <span class="toc-text">é…ç½®å¼€æœºè‡ªå¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ›´æ–°"><span class="toc-number">5.</span> <span class="toc-text">æ›´æ–°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#BBR-ä¼˜åŒ–"><span class="toc-number">6.</span> <span class="toc-text">BBR ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ’ä»¶"><span class="toc-number">7.</span> <span class="toc-text">æ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é™„åŠ "><span class="toc-number">8.</span> <span class="toc-text">é™„åŠ </span></a></li></ol>
			</div>
		
		
        <p>CentOS7 ç¼–è¯‘æºç å®‰è£… ss-libev, æ–‡ç« æœ€è¿‘æ›´æ–°äº <strong>2019å¹´10æœˆ11æ—¥</strong><br><a id="more"></a></p>
<h1 id="å®‰è£…ç¼–è¯‘å·¥å…·"><a href="#å®‰è£…ç¼–è¯‘å·¥å…·" class="headerlink" title="å®‰è£…ç¼–è¯‘å·¥å…·"></a>å®‰è£…ç¼–è¯‘å·¥å…·</h1><ul>
<li><p>CentOS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release gcc gettext autoconf libtool automake make asciidoc xmlto c-ares-devel libev-devel pcre-devel -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¹Ÿæ”¾ä¸€ä¸‹ Ubuntu ç³»åˆ—çš„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install --no-install-recommends gettext build-essential autoconf libtool libpcre3-dev asciidoc xmlto libev-dev libc-ares-dev automake -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¸¸ç”¨å·¥å…·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git wget vim -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>å•ç‹¬å®‰è£… libsodium</p>
<blockquote>
<p>libsodium æ˜¯ä¸€ä¸ªå…ˆè¿›è€Œä¸”æ˜“ç”¨çš„åŠ å¯†åº“ã€‚ ä¸»è¦ç”¨äºåŠ å¯†ã€è§£å¯†ã€ç­¾åå’Œç”Ÿæˆå¯†ç å“ˆå¸Œã€‚<br>Noteï¼šå¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ <a href="https://download.libsodium.org/libsodium/releases/" title="Libsodium" target="_blank" rel="noopener">Libsodium</a> çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
</blockquote>
</li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LIBSODIUM_VER=1.0.17</span><br><span class="line">wget https://download.libsodium.org/libsodium/releases/libsodium-<span class="variable">$LIBSODIUM_VER</span>.tar.gz</span><br><span class="line">tar xvf libsodium-<span class="variable">$LIBSODIUM_VER</span>.tar.gz</span><br><span class="line"><span class="built_in">pushd</span> libsodium-<span class="variable">$LIBSODIUM_VER</span></span><br><span class="line">./configure --prefix=/usr &amp;&amp; make</span><br><span class="line">sudo make install</span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
</li>
<li><p>å•ç‹¬å®‰è£… mbedtls (SSLå’ŒTLS)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MBEDTLS_VER=2.6.0</span><br><span class="line">wget https://tls.mbed.org/download/mbedtls-<span class="variable">$MBEDTLS_VER</span>-gpl.tgz</span><br><span class="line">tar xvf mbedtls-<span class="variable">$MBEDTLS_VER</span>-gpl.tgz</span><br><span class="line"><span class="built_in">pushd</span> mbedtls-<span class="variable">$MBEDTLS_VER</span></span><br><span class="line">make SHARED=1 CFLAGS=-fPIC</span><br><span class="line">sudo make DESTDIR=/usr install</span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="å®‰è£…-SS"><a href="#å®‰è£…-SS" class="headerlink" title="å®‰è£… SS"></a>å®‰è£… SS</h1><p>å‰é¢ä¸€äº›ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œç°åœ¨æ­£å¼å®‰è£…æˆ‘ä»¬çš„ä¸»è§’ã€‚</p>
<ul>
<li><p>ä¸‹è½½æºç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/shadowsocks/shadowsocks-libev.git</span><br><span class="line"><span class="built_in">cd</span> shadowsocks-libev</span><br><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘æºç å¹¶å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./autogen.sh &amp;&amp; ./configure &amp;&amp; make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ss å·²ç»å®‰è£…å®Œæˆ, ä¸‹é¢å¼€å§‹é…ç½®å¯†ç ä¹‹ç±»çš„</p>
<h2 id="é…ç½®-SS"><a href="#é…ç½®-SS" class="headerlink" title="é…ç½® SS"></a>é…ç½® SS</h2><ul>
<li><p>åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/shadowsocks-libev</span><br><span class="line">vim /etc/shadowsocks-libev/config.json</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"server"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">  <span class="attr">"nameserver"</span>: <span class="string">"8.8.8.8"</span>,</span><br><span class="line">  <span class="attr">"server_port"</span>: <span class="number">443</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"ä½ çš„å¯†ç "</span>,</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"chacha20-ietf-poly1305"</span>,</span><br><span class="line">  <span class="attr">"timeout"</span>: <span class="number">600</span>,</span><br><span class="line">  <span class="attr">"no_delay"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"mode"</span>: <span class="string">"tcp_and_udp"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>local_address è¿™è¡Œè¦ä¹ˆè®¾ç½®ä¸º 0.0.0.0ï¼Œè¦ä¹ˆåˆ æ‰ã€‚å…¶å®ƒçš„å‚æ•°è‡ªè¡Œæ–Ÿé…Œæ”¹åŠ¨ã€‚</p>
<h2 id="é…ç½®é˜²ç«å¢™ç«¯å£"><a href="#é…ç½®é˜²ç«å¢™ç«¯å£" class="headerlink" title="é…ç½®é˜²ç«å¢™ç«¯å£"></a>é…ç½®é˜²ç«å¢™ç«¯å£</h2><p>ä¸Šé¢è®¾ç½®äº†ä¸€ä¸ª 443 ç«¯å£ï¼ˆä½ ä¹Ÿå¯ä»¥æ”¹æˆå…¶å®ƒçš„ï¼‰ï¼Œç°åœ¨éœ€è¦åœ¨é˜²ç«å¢™ä¸Šå¼€æ”¾è¿™ä¸ª 443 ç«¯å£ï¼ˆ å¦‚æœä¸å¼€æ”¾ï¼Œé‚£ä¹ˆæ‰€æœ‰é€šè¿‡è¿™ä¸ª 443 ç«¯å£çš„å¤–éƒ¨æµé‡éƒ½ä¼šè¢«é˜²ç«å¢™æ‹¦æˆªæ‰ ï¼‰</p>
<ul>
<li><p>å¯åŠ¨ Firewalld é˜²ç«å¢™ (æœ‰çš„ vps é»˜è®¤å®‰è£…ä½¿ç”¨ iptables è¿™ä¸ªé˜²ç«å¢™ ,å…³äºåœ¨ iptables æ€ä¹ˆå¼€æ”¾ç«¯å£è¯·è‡ªè¡Œæœç´¢æŠ˜è…¾)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ‰çš„ vps å¯èƒ½æ²¡æœ‰é¢„è£… firewalld ï¼Œè¯·å…ˆå®‰è£…å†æ‰§è¡Œä¸Šé¢å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install firewalld -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ å¼€æ”¾ç«¯å£(å°±æ˜¯ä¸Šé¢é…ç½®ä¸­çš„ç«¯å£å· 443 )</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=ä½ çš„ç«¯å£å·/tcp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=ä½ çš„ç«¯å£å·/udp</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šå¦‚æœä½ çš„ ssh ç™»å½•çš„ç«¯å£ä¸æ˜¯é»˜è®¤çš„ 22 ,ä¸€å®šè¦å†æŠŠä½ çš„ ssh ç«¯å£ä¹Ÿæ·»åŠ ä¸Šå», å¦åˆ™å¯èƒ½å¯¼è‡´ä½ ç™»å½•ä¸äº† VPS, ç„¶ååˆ·æ–°ä¸‹ssh æœåŠ¡ï¼Œå¦‚æœè¿˜æœ‰ ftp ç«¯å£ä¹Ÿæ˜¯ä¸€æ ·ã€‚</strong></p>
<blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä½¿ç«¯å£ç”Ÿæ•ˆ ï¼ˆ<strong>å†çœ‹ä¸€éä¸Šé¢çš„æ³¨æ„æç¤ºï¼Œå¦‚æœæ²¡æœ‰æŠŠ ç™»å½• vps çš„ç«¯å£åŠ ä¸Šå»ï¼Œæ‰§è¡Œå®Œä¸‹é¢å‘½ä»¤åï¼Œä½ å¯èƒ½ç™»ä¸äº† vps, æœ€ååªèƒ½ä» vps æœåŠ¡å•†çš„ç®¡ç†åå°ç™»å½•</strong>ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹å·²å¼€æ”¾çš„ç«¯å£ï¼ˆå¯è·³è¿‡ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h1><p>åˆ°æ­¤å·²ç»å®Œæˆæ‰€æœ‰å®‰è£…ï¼Œå¯åŠ¨ ss æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»»é€‰ä¸€ç§æ–¹å¼</p>
<ul>
<li><p>ç¬¬ä¸€ç§ï¼šé€šè¿‡ä½¿ç”¨ä¸Šé¢æˆ‘ä»¬åˆ›å»ºå¥½çš„é…ç½®æ–‡ä»¶æ¥å¯åŠ¨ ( æ¨è )</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss-server -c /etc/shadowsocks-libev/config.json</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¬¬äºŒç§ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss-server -s æœåŠ¡å™¨IP -p ç«¯å£ -k å¯†ç  -m chacha20-ietf-poly1305 -u -l 1080 -t 600 --fast-open <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦‚æœä¸Šé¢ä½ çš„ç«¯å£å·²ç»åœ¨é˜²ç«å¢™å¼€æ”¾äº†ï¼Œå¯†ç ä¹Ÿè®¾ç½®å¥½äº†ï¼›ä¸å‡ºæ„å¤–åº”è¯¥å¯ä»¥é¨æ¸¸ä¸–ç•Œäº†ã€‚ã€‚</p>
<blockquote>
<p>å¦‚æœä½ æƒ³è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆ<strong>æ¨è</strong>ï¼‰ï¼Œä¸ºäº†é¿å…åç»­è®¾ç½®å¼€æœºè‡ªå¯å¯èƒ½å‡ºç°é—®é¢˜ï¼Œè¯·æš‚æ—¶å…ˆ<strong>ä¸è¦</strong>é€šè¿‡ ss-server -s å‘½ä»¤å¯åŠ¨(æ–¹å¼2å¯åŠ¨)<br>Note: æ³¨æ„ ss-server -c å’Œ ss-server -s çš„åŒºåˆ« </p>
</blockquote>
<h1 id="é…ç½®å¼€æœºè‡ªå¯"><a href="#é…ç½®å¼€æœºè‡ªå¯" class="headerlink" title="é…ç½®å¼€æœºè‡ªå¯"></a>é…ç½®å¼€æœºè‡ªå¯</h1><ul>
<li><p>åˆ›å»ºä¸€ä¸ª Service æœåŠ¡æ–‡ä»¶ï¼ˆservice æ˜¯ä¸€ç§é»˜é»˜åœ¨åå°è®¤çœŸå·¥ä½œçš„ä¸€ç§è„šæœ¬æ–‡ä»¶ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/ss.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾€è¯¥æ–‡ä»¶ç²˜è´´ä»¥ä¸‹ä¸€ç§æ–¹å¼å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks Server</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/bin/ss-server -c /etc/shadowsocks-libev/config.json</span><br><span class="line">Restart=on-abort</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ³¨æ„ ss-server æ‰€åœ¨çš„è·¯å¾„ï¼Œé¿å…å‡ºç°æ‰¾ä¸åˆ° ss-server æ–‡ä»¶çš„æƒ…å†µ ï¼Œå¦‚æœå‰é¢å·²ç»èƒ½é¨æ¸¸ä¸–ç•Œäº†ï¼Œè¿™é‡ŒåŸºæœ¬å°±æ²¡ä»€ä¹ˆé—®é¢˜äº†</p>
<ul>
<li>è¿è¡Œè¯¥è‡ªå¯æœåŠ¡<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> ss.service</span><br><span class="line">systemctl start ss.service</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ¯æ¬¡ä¿®æ”¹ service æ–‡ä»¶, éƒ½å¿…é¡»æ‰§è¡Œ <figure class="highlight plain"><figcaption><span>daemon-reload``` ä»¥é‡æ–°åŠ è½½ï¼› ä¿®æ”¹ ss çš„ config.json æ–‡ä»¶ä¸éœ€è¦ï¼Œä½†éƒ½è¦æ‰§è¡Œ ``` systemctl restart ss ```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># é—®é¢˜æ’æŸ¥</span><br><span class="line">- **å‡ºç° active running** ç»¿è‰²ä»£è¡¨å¯ç”¨ï¼ˆæ³¨æ„ï¼šç»ˆç«¯çš„ä¸»é¢˜ä¸ä¸€æ ·ï¼Œé¢œè‰²å¯èƒ½ä¸ä¸€æ ·ä»¥ active running å…³é”®å­—ä¸ºå‡†ï¼‰</span><br><span class="line">```bash</span><br><span class="line">systemctl status ss.service</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>ä¸èƒ½è¿è¡Œæ—¶ï¼Œé‡å¯ SS çš„è‡ªå¯æœåŠ¡æ–‡ä»¶è¯•è¯•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart ss.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ˜¾ç¤º active running ä½†å®¢æˆ·ç«¯è¿ä¸ä¸Šï¼Œè¯·é‡å¯ VPS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -r now</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡å¯ä¹‹åå†æ¬¡æŸ¥çœ‹ SS è¿è¡ŒçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status ss.service</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¦‚æœé‡å¯ä¹‹åï¼Œæ˜¾ç¤º active runningï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¾ç„¶è¿æ¥ä¸ä¸Šï¼Œè¿™ç§æƒ…å†µæœ‰å¯èƒ½æ˜¯å¼€æ”¾ç«¯å£çš„é—®é¢˜ï¼Œè¯·å°è¯•æ–‡ç« å‰é¢çš„ç«¯å£è®¾ç½®éƒ¨åˆ†ï¼Œå°è¯•æ›´æ¢ç«¯å£å·ï¼ŒåŒæ—¶åŠ¡å¿…è®°å¾—å‘é˜²ç«å¢™å¼€æ”¾è¯¥ç«¯å£å·ã€‚</p>
</li>
<li><p>å¦‚æœé‡å¯ä¹‹åï¼Œæ˜¾ç¤ºçš„çº¢è‰²ï¼Œå¯èƒ½æ˜¯é…ç½®æ–‡ä»¶çš„æ ¼å¼æ²¡æœ‰é…ç½®æ­£ç¡®ï¼Œæˆ–è€…ç›¸å…³æ’ä»¶é…ç½®é”™è¯¯ï¼Œè¯·ä»”ç»†æŸ¥çœ‹ Error éƒ¨åˆ†çš„æ—¥å¿—ç¡®å®šé—®é¢˜æ‰€åœ¨ï¼Œæƒ³æ’ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œæ’ä»¶çš„å¯æ‰§è¡Œè¡Œæƒé™æ˜¯å¦æ­£ç¡®ã€‚</p>
</li>
<li><p>ä»”ç»†æ£€æŸ¥ï¼šç¼–è¯‘è¿‡ç¨‹æ˜¯å¦å‡ºé”™ï¼ˆå†ç¼–è¯‘ä¸€éï¼‰ ã€ é…ç½®æ–‡ä»¶æ²¡æœ‰é…ç½®æ­£ç¡® ã€ ç«¯å£æ²¡æœ‰å¼€æ”¾ ã€æ’ä»¶ç›®å½•ä¸æ­£ç¡®ã€ æ’ä»¶ä¸æ˜¯å¯æ‰§è¡Œæƒé™ã€ æ’ä»¶é…ç½® ã€‚</p>
</li>
</ul>
</li>
</ul>
<h1 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h1><ul>
<li><p>å…ˆåœæ­¢è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop ss.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿›å…¥åˆ°å®‰è£…ç›®å½•è¿›è¡Œ pull æ›´æ–°å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> shadowsocks-libev</span><br><span class="line">git pull</span><br><span class="line">./configure make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ›´æ–°å®Œè®°å¾—å¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start ss.service</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="BBR-ä¼˜åŒ–"><a href="#BBR-ä¼˜åŒ–" class="headerlink" title="BBR ä¼˜åŒ–"></a>BBR ä¼˜åŒ–</h1><ul>
<li><a href="https://www.vultr.com/docs/how-to-deploy-google-bbr-on-centos-7" target="_blank" rel="noopener">CentOS å®‰è£… BBR</a></li>
</ul>
<h1 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h1><ul>
<li><a href="https://gist.github.com/shuanghua/c9c448f9bd12ebbfd720b34f4e1dd5c6" target="_blank" rel="noopener">centos7 å®‰è£… v2ray-plugin </a></li>
<li><a href="https://moshuanghua.com/2017/10/08/23-1-kcptun/">centos7 å®‰è£… kcptun </a></li>
</ul>
<h1 id="é™„åŠ "><a href="#é™„åŠ " class="headerlink" title="é™„åŠ "></a>é™„åŠ </h1><ul>
<li><a href="https://moshuanghua.com/2017/10/09/23-2-ubuntu%E6%A1%8C%E9%9D%A2%E7%89%88%E5%AE%89%E8%A3%85ss/">Ubuntu 16 æ¡Œé¢ç‰ˆ ss-libev å®¢æˆ·ç«¯</a></li>
<li><a href="https://moshuanghua.com/2017/10/10/23-3-%E4%BF%AE%E6%94%B9ssh%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3/">ä¿®æ”¹é»˜è®¤çš„ ssh 22 ç«¯å£</a></li>
<li><a href="https://moshuanghua.com/2019/10/11/23-4-debian10-snap-%E6%8A%98%E8%85%BE/">Debian10 ä» snap å®‰è£… ss-libev</a></li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/08/23-1-kcptun/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          centos7 kcptun
        
      </div>
    </a>
  
  
    <a href="/2017/09/22/20-Kotlin å•ä¾‹/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Kotlin å•ä¾‹</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<div class="social-share"></div>

	<!--  css & js -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
</div>





<div class="livere">
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <div id="lv-container" data-id="city" data-uid="MTAyMC8yODM1OC80OTMw">
        <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];

           if (typeof LivereTower === 'function') { return; }

           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           e.parentNode.insertBefore(j, e);
       })(document, 'script');
        </script>
    <noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
    </div>
    <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
</div>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2019 ğ‘ºğ’‚ğ’.ğ‘´ğ’
    	</div>
      	<div class="footer-right">
      		<p>
            <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten    
            </p>
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>


<!--ç™¾åº¦ç»Ÿè®¡çš„ä»£ç -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b7e1df5af826817394109f5f7425af1a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </div>
</body>
</html>