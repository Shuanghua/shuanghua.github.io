<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Kotlin æ³›å‹-ç¬”è®° | ğ‘ºğ’‚ğ’.ğ‘´ğ’</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="å¯¹ Kotlin æ³›å‹çš„åŠ æ·±ç†è§£">
<meta name="keywords" content="Kotlin">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin æ³›å‹-ç¬”è®°">
<meta property="og:url" content="https://moshuanghua.com/2017/09/07/18-Kotlinæ³›å‹ç¬”è®°/index.html">
<meta property="og:site_name" content="ğ‘ºğ’‚ğ’.ğ‘´ğ’">
<meta property="og:description" content="å¯¹ Kotlin æ³›å‹çš„åŠ æ·±ç†è§£">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-09T11:51:50.642Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kotlin æ³›å‹-ç¬”è®°">
<meta name="twitter:description" content="å¯¹ Kotlin æ³›å‹çš„åŠ æ·±ç†è§£">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="https://avatars3.githubusercontent.com/u/8361358?s=460&amp;v=4" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ğ‘ºğ’‚ğ’.ğ‘´ğ’</a></h1>
		</hgroup>

		
		<p class="header-subtitle">æŠ€æœ¯ä¸ç”Ÿæ´»å¹¶è‚©ä½œæˆ˜ã€‚</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>èœå•</li>
						<li>æ ‡ç­¾</li>
						
						<li>å‹æƒ…é“¾æ¥</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">å½’æ¡£</a></li>
				        
							<li><a href="/about">å…³äº</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/shuanghua" title="github">github</a>
					        
								<a class="mail" target="_blank" href="/shhua17@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 12.5px;">Java</a> <a href="/tags/Kotlin/" style="font-size: 17.5px;">Kotlin</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/æ‰‹æœº/" style="font-size: 10px;">æ‰‹æœº</a> <a href="/tags/æŠ˜è…¾/" style="font-size: 10px;">æŠ˜è…¾</a> <a href="/tags/æ‚æ–‡/" style="font-size: 10px;">æ‚æ–‡</a> <a href="/tags/ç¡¬ä»¶/" style="font-size: 10px;">ç¡¬ä»¶</a> <a href="/tags/é€šçŸ¥/" style="font-size: 10px;">é€šçŸ¥</a> <a href="/tags/é—²è¯/" style="font-size: 12.5px;">é—²è¯</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://moshuanghua.com">å‹é“¾</a>
			        
			        </div>
				</section>
				

				
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ğ‘ºğ’‚ğ’.ğ‘´ğ’</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://avatars3.githubusercontent.com/u/8361358?s=460&amp;v=4" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ğ‘ºğ’‚ğ’.ğ‘´ğ’</h1>
			</hgroup>
			
			<p class="header-subtitle">æŠ€æœ¯ä¸ç”Ÿæ´»å¹¶è‚©ä½œæˆ˜ã€‚</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">å½’æ¡£</a></li>
		        
					<li><a href="/about">å…³äº</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/shuanghua" title="github">github</a>
			        
						<a class="mail" target="_blank" href="/shhua17@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-18-Kotlinæ³›å‹ç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/07/18-Kotlinæ³›å‹ç¬”è®°/" class="article-date">
  	<time datetime="2017-09-06T16:00:00.000Z" itemprop="datePublished">2017-09-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Kotlin æ³›å‹-ç¬”è®°
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kotlin/">Kotlin</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Kotlin/">Kotlin</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">	
      
	  
		
		
        <h1 id="Kotlin-æ³›å‹"><a href="#Kotlin-æ³›å‹" class="headerlink" title="Kotlin æ³›å‹"></a>Kotlin æ³›å‹</h1><blockquote>
<p>Kotlin å’Œ Java çš„æ³›å‹éƒ½æ˜¯ä¼ªæ³›å‹ã€‚</p>
</blockquote>
<blockquote>
<p>Kotlin æ³›å‹æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼š<strong>å‹å˜</strong>ï¼ˆdeclaration-site varianceï¼‰å’Œ<strong>ç±»å‹æŠ•å½±</strong>ï¼ˆtype projectionsï¼‰ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="å…³äº-Kotlin-æ³›å‹è¯­æ³•å®šä¹‰"><a href="#å…³äº-Kotlin-æ³›å‹è¯­æ³•å®šä¹‰" class="headerlink" title="å…³äº Kotlin æ³›å‹è¯­æ³•å®šä¹‰"></a>å…³äº Kotlin æ³›å‹è¯­æ³•å®šä¹‰</h2><ul>
<li><p>ç±» çš„æ³›å‹å®šä¹‰åœ¨ç±»åçš„ åé¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Box&lt;T&gt;(t: T)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡½æ•° çš„æ³›å‹å®šä¹‰åœ¨å‡½æ•°çš„ å‰é¢</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è°ƒç”¨ çš„å®šä¹‰äº†æ³›å‹å‚æ•°çš„å‡½æ•°ï¼ŒæŠŠéœ€è¦ä¼ å…¥çš„æ³›å‹å†™åœ¨å‡½æ•°å åé¢</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test&lt;<span class="built_in">Int</span>&gt;()</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœå‚æ•°çš„å€¼å·²ç»ç¡®å®šäº†ç±»å‹ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ç±»å‹</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> box: Box&lt;<span class="built_in">Int</span>&gt; = Box&lt;<span class="built_in">Int</span>&gt;(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">val</span> box = Box(<span class="number">1</span>) <span class="comment">//1æ˜¯ Int å‹ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šæ¨æ–­å‡ºæˆ‘ä»¬è°ƒç”¨çš„æ˜¯ Box&lt;Int&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ä¸‹é¢è¿›å…¥æ­£é¢˜ï¼š</p>
<h1 id="å‹å˜"><a href="#å‹å˜" class="headerlink" title="å‹å˜"></a>å‹å˜</h1><p>ä¾‹ï¼š</p>
<blockquote>
<p>å‹å˜ï¼šMan æ˜¯ Person çš„å­ç±»ï¼Œå¦‚æœ List&lt; Man &gt; ä¹Ÿæ˜¯List&lt; Person &gt; çš„å­ç±»ã€‚é‚£ä¹ˆå°±å¯ä»¥ç§°ä¹‹ä¸ºç±»å‹å‹å˜ã€‚åœ¨ java ä¸­è¿™ç§ç‰¹ç‚¹ä¹Ÿç§°ä¸ºæ³›å‹ä¸å¯å˜ã€‚<br>Kotlin å‹å˜åŒ…æ‹¬äº† <strong>åå˜</strong> å’Œ <strong>é€†å˜</strong> ä»¥åŠ <strong>ä¸å˜</strong> ä¸‰ç§.</p>
</blockquote>
<h2 id="Java-å‹å˜"><a href="#Java-å‹å˜" class="headerlink" title="Java å‹å˜"></a>Java å‹å˜</h2><p>åœ¨äº†è§£ Kotlin å‹å˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Java çš„æ³›å‹å‹å˜ï¼Œåœ¨ Java ä¸­æˆ‘ä»¬è¦ç”¨ &lt;? extends T&gt; æŒ‡å®šç±»å‹å‚æ•°çš„ä¸Šé™ï¼Œç”¨ &lt;? super T&gt; æŒ‡å®šç±»å‹å‚æ•°çš„ä¸‹é™ã€‚</p>
<p>ä¾‹ï¼š<br>å½“ Man æ˜¯ Person çš„å­ç±»ï¼Œä½† List&lt; Man &gt; å’Œ List&lt; Person &gt; åœ¨ Java ä¸­æ˜¯ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰çš„ï¼Œä¸èƒ½ç›¸äº’è½¬å‹ï¼ å¦‚æœè¦è®© List&lt; Man &gt; èƒ½èµ‹å€¼ç»™ List&lt; Person &gt; ï¼Œæˆ‘ä»¬å°±å¾—ä½¿ç”¨ &lt;? extends Person&gt;ï¼Œçœ‹ java Collection æºç çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">E</span>&gt; </span>&#123;<span class="comment">// Java</span></span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>add() å’Œ addAll()ï¼Œä»–ä»¬çš„ä½œç”¨åˆ†åˆ«å•ä¸ªæ“ä½œå’Œæ‰¹é‡æ“ä½œçš„åŒºåˆ«ã€‚å†çœ‹ä»–ä»¬çš„å‚æ•°ï¼Œä¸€ä¸ªæ˜¯ E ç±»å‹ï¼Œä¸€ä¸ªæ˜¯ &lt;? extends E&gt;, ? extends E è¡¨ç¤ºåªèƒ½æ¥æ”¶æ³›å‹å‚æ•°ç±»å‹ä¸º E å­ç±»çš„ä»»æ„ç±»å‹,è¿™æ ·æ¥é™å®š List<man> èµ‹å€¼ç»™ List<person> çš„å¿…å¤‡å‰ææ¡ä»¶ã€‚</person></man></p>
<p>ç”¨ä»£ç è§£é‡Šï¼š<br>    list1.add(10)// è¿™æ · E çš„ç±»å‹å°±å˜æˆäº† Int ç±»å‹ã€‚<br>    list2.addAll(list1)//list1é‡Œé¢çš„æ•°æ®ç±»å‹å°±å¾—å¿…é¡»æ˜¯ Int æˆ– Int çš„å­ç±»ã€‚</p>
<h2 id="Kotlin-å‹å˜"><a href="#Kotlin-å‹å˜" class="headerlink" title="Kotlin å‹å˜"></a>Kotlin å‹å˜</h2><p>åœ¨ Kotlin å°±æŠ›å¼ƒäº†è¿™ä¸ªå½¢å¼ï¼Œå¼•å…¥äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„æ¦‚å¿µ</p>
<ul>
<li><p>ç”Ÿäº§è€…æ˜¯é‚£äº›åªèƒ½ è¯»å– æ•°æ®çš„å¯¹è±¡ ( <strong>out</strong> )(<strong>åå˜</strong>)</p>
</li>
<li><p>æ¶ˆè´¹è€…æ˜¯é‚£äº›åªèƒ½ å†™å…¥ æ•°æ®çš„å¯¹è±¡ ( <strong>in</strong> )(<strong>é€†å˜</strong>)</p>
</li>
<li><p>ç”Ÿäº§å•¥å°±æ¶ˆè´¹å•¥å°±æ˜¯<strong>ä¸å˜</strong></p>
</li>
</ul>
<p>ä¸‹é¢å…·ä½“çœ‹è¿™ä¸‰ä¸ªä½¿ç”¨æ–¹å¼ï¼š</p>
<h3 id="åå˜-out"><a href="#åå˜-out" class="headerlink" title="åå˜ out"></a>åå˜ out</h3><blockquote>
<p>å­ç±»ç±»å‹å˜æˆçˆ¶ç±»ç±»å‹ï¼Œæ¯”å¦‚æŠŠ List&lt; Man&gt; èµ‹å€¼ç»™ List&lt; Person&gt;</p>
</blockquote>
<p>Kotlin ä¸­ out å…³é”®å­—ç»å¸¸é‡è§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Kotlin æ˜¯æ€ä¹ˆå®šä¹‰çš„ Collection</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="type">out E</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">E</span>&gt; </span>&#123;<span class="comment">// Kotlin</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>out E è¡¨æ˜ E æ˜¯åå˜çš„ï¼Œå¦‚æœä¸¤æ¬¡ä¼ ç»™ E çš„ç±»å‹æ˜¯æœ‰å…³ç³»çš„ï¼Œå‡è®¾ E1 ç»§æ‰¿ E2ï¼Œé‚£ä¹ˆ Collection &lt; E1 &gt; å’Œ Collection&lt; E2 &gt; ä¹Ÿæ˜¯æœ‰å…³ç³»çš„ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯ Kotlin å®ç° Java æ³›å‹çš„ç›¸åŒä¹‹å¤„ã€‚ä½†è¿™æ˜¯ Kotlin ,æ€ä¹ˆä¼šæ˜¯æ¢ä¸€ä¸ªå®šä¹‰è¿™ä¹ˆç®€å•ï¼Œè¿˜è®°å¾—ä¸Šé¢æˆ‘ä»¬æœ‰æåˆ°è¿‡ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å—ï¼Œè¿™æ‰æ˜¯ kotlin çš„ä¸åŒä¹‹å¤„ã€‚</p>
<p>åœ¨ Kotlin ä¸­ï¼Œout è¢«èµ‹äºˆäº†ç”Ÿäº§è€…çš„æ¦‚å¿µï¼šè¢« out ä¿®é¥°çš„ç±»å‹åªèƒ½ç”¨äºè¿”å›å€¼ç±»å‹ã€‚</p>
<ul>
<li>å¯¹æ¯”ä¸¤æ®µæˆ‘è‡ªå†™çš„ä»£ç ä¾‹å­å°±å¾ˆæ¸…æ™°äº†ï¼š<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyList</span>&lt;<span class="type">out T</span>&gt; </span>&#123;<span class="comment">// Kotlin</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(t: <span class="type">T</span>)</span></span> <span class="comment">// ç¼–è¯‘å™¨æŠ¥é”™</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">addAll</span><span class="params">(t: <span class="type">T</span>)</span></span> <span class="comment">// ç¼–è¯‘å™¨æŠ¥é”™</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyList</span>&lt;<span class="type">out T</span>&gt; </span>&#123;<span class="comment">// Kotlin</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(t: <span class="type">T</span>)</span></span> <span class="comment">// ç¼–è¯‘å™¨æŠ¥é”™</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">addAll</span><span class="params">()</span></span>: T <span class="comment">// æ­£ç¡®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¢« out ä¿®é¥°çš„ T ,åªèƒ½åšä¸ºè¿”å›å€¼ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºå‡½æ•°å‚æ•°ç±»å‹ï¼Œå› ä¸ºå‡½æ•°çš„å‚æ•°æ˜¯ç”¨æ¥æ¶ˆè´¹ã€‚</p>
<h4 id="UnsafeVariance"><a href="#UnsafeVariance" class="headerlink" title="@UnsafeVariance"></a>@UnsafeVariance</h4><p>ä¸Šé¢è¯´ out T, è¯´æ˜è¿™ä¸ª T åªèƒ½ç”¨äºç”Ÿäº§(åªèƒ½ç”¨äºè¿”å›å€¼ç±»å‹)ï¼Œä½†æœ‰äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ—¢éœ€è¦è¿™ä¸ª T ç”¨äºè¿”å›å€¼ç±»å‹ï¼Œåˆéœ€è¦ç”¨äºå‡½æ•°å‚æ•°ç±»å‹, é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ° @UnsafeVariance æ³¨è§£ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ç¡®å®šæ­¤å¤„å®‰å…¨ï¼Œä¸ç”¨ç¼–è¯‘å™¨è¿›è¡Œå®‰å…¨æ£€æµ‹ï¼Œä»è€Œè¾¾åˆ°ä¸¤å¤„ä½¿ç”¨çš„ç›®çš„ã€‚</p>
<p>åœ¨ Kotlin Collection æ¥å£é‡Œçš„ä¸€ä¸ªå‡½æ•°ä¾‹å­ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="type">out E</span>&gt; : <span class="type">Iterable</span>&lt;<span class="type">E</span>&gt; </span>&#123; </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">contains</span><span class="params">(element: @<span class="type">UnsafeVariance</span> <span class="type">E</span>)</span></span>: <span class="built_in">Boolean</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ¬æ¥è¿™ä¸ª E å·²ç»è¢«ä¿®é¥°ä¸º: out åå˜, æœ¬ä¸å¯åœ¨ containsï¼ˆï¼‰ å‡½æ•°çš„å‚æ•°ä¸­ä½¿ç”¨ï¼Œä½†å€ŸåŠ©äº† @UnsafeVariance æ³¨è§£ï¼Œå°±å¯ä»¥è¢«ç”¨åšå‡½æ•°çš„å‚æ•°ç±»å‹ã€‚ä½¿ç”¨ @UnsafeVariance çš„å‰ææ˜¯ç¡®ä¿ç±»å‹å®‰å…¨å³å¯ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯ç±»å‹å®‰å…¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç±»å‹å®‰å…¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»å‹å®‰å…¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç±»å‹å®‰å…¨ï¼Ÿ</h4><blockquote>
<p>Kotlin æ˜¯ä¸€é—¨é™æ€ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æœŸå°±è‡ªåŠ¨åšç±»å‹å®‰å…¨æ£€æŸ¥ã€‚æ¯”å¦‚æŠŠä¸€ä¸ª Double ç±»å‹èµ‹å€¼ç»™ Int ç±»å‹ï¼Œä¼šé€ æˆç²¾åº¦ä¸¢å¤±ï¼Œè¯´æ˜è¿™æ˜¯ä¸å®‰å…¨çš„ç±»å‹èµ‹å€¼æ“ä½œã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„ä»£ç å¾ˆå¥½çš„è§£é‡Šäº†è¿™ä¸ªæƒ…å†µï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCollection</span>&lt;<span class="type">out T</span>&gt;</span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(t: <span class="type">T</span>)</span></span>&#123;<span class="comment">//æŠ¥é”™</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list: MyCollection&lt;Number&gt; = MyCollection&lt;<span class="built_in">Int</span>&gt;() <span class="comment">//åœ¨å£°æ˜çš„æ—¶å€™ç¡®å®šäº† T = Int ç±»å‹</span></span><br><span class="line">list.add(<span class="number">3.0</span>)<span class="comment">// E çš„ç±»å‹è®¾ç½®ä¸º Double</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>Double èµ‹å€¼ç»™ Int çš„æ“ä½œï¼Œä¸¢å¤±ç²¾åº¦ï¼Œä¸æ˜¯å®‰å…¨èµ‹å€¼ã€‚</li>
<li>è°ƒç”¨å¤„çš„ä»£ç å¯ä»¥ç¼–è¯‘é€šè¿‡çš„ï¼Œè€Œ MyCollection ä¸­çš„æŠ¥é”™æ˜¯å¿…ç„¶çš„ï¼Œå› ä¸º out çš„é™å®šã€‚</li>
<li>å½“ä½¿ç”¨ @UnsafeVariance æ³¨è§£åï¼Œç¼–è¯‘å™¨å°±ä¸æç¤ºå†²çªäº†ï¼Œè¿™æ ·æˆ‘ä»¬åé¢è°ƒç”¨ add çš„æ—¶å€™å¯ä»¥ä¼ å…¥ Int Double å°±æ²¡é—®é¢˜äº†ã€‚<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCollection</span>&lt;<span class="type">out T</span>&gt;</span>&#123; </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">add</span><span class="params">(t: @<span class="type">UnsafeVariance</span> <span class="type">T</span>)</span></span>&#123;<span class="comment">//ä¸æŠ¥é”™</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>ä½†è¿™æ ·æ–°çš„é—®é¢˜å°±æ¥äº†ï¼šadd æ˜¯ä¸€ä¸ªé›†åˆæ“ä½œï¼Œé‡Œé¢æœ‰ Intï¼Œåˆæœ‰ Double, æˆ‘è¦éå†æ€ä¹ˆéå†ï¼Ÿè¿™å°±é€ æˆäº†è¯»å–çš„é—®é¢˜ã€‚è¿™å°±å°´å°¬äº†ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ @UnsafeVariance æ³¨è§£çš„æ—¶å€™ï¼Œå°½é‡ç¡®ä¿ç¬¬äºŒæ¬¡ç»™ T ç¡®å®šç±»å‹çš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·çš„ç±»å‹ã€‚è¿™ä¹Ÿæ˜¯é™æ€è¯­è¨€çš„ç‰¹ç‚¹ï¼Œä¸ºäº†è§£å†³ç±»å‹çš„ä¸ç¡®å®šæ€§ï¼Œå°±æœ‰äº†ä¸‹é¢çš„ <strong>é€†å˜</strong> æ¦‚å¿µã€‚</p>
</blockquote>
<h2 id="é€†å˜-in"><a href="#é€†å˜-in" class="headerlink" title="é€†å˜ in"></a>é€†å˜ in</h2><blockquote>
<p>çˆ¶ç±»ç±»å‹å˜æˆå­ç±»ç±»å‹,æ¯”å¦‚æŠŠ Comparable&lt; Number&gt; èµ‹å€¼ç»™ Comparable&lt; Int&gt;</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="type">in T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">compareTo</span><span class="params">(other: <span class="type">T</span>)</span></span>: <span class="built_in">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">demo</span><span class="params">(f: <span class="type">Comparable</span>&lt;<span class="type">Number</span>&gt;)</span></span> &#123;</span><br><span class="line">    f.compareTo(<span class="number">1.0</span>)</span><br><span class="line">    <span class="keyword">val</span> a: Comparable&lt;<span class="built_in">Double</span>&gt; = f <span class="comment">// OK!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„  @UnsafeVariance æ³¨è§£ä½¿ç”¨çš„å‰ææ˜¯ä½ å¾—ç¡®ä¿ä½ çš„ç±»å‹å®‰å…¨ã€‚å¦‚æœä¸èƒ½ç¡®å®šï¼Œé‚£æ€ä¹ˆåŠï¼ŸSo å°±æœ‰äº†è¿™ä¸ª<strong>é€†å˜</strong>çš„æ¦‚å¿µ</p>
<blockquote>
<p>in T, å°±æ˜¯è¿™ä¸ª T åªèƒ½ç”¨äºå‚æ•°ç±»å‹</p>
</blockquote>
<ul>
<li>ç†è§£äº† out ,in çš„ä½¿ç”¨å°±å¾ˆç®€å•äº†ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyList</span>&lt;<span class="type">in E, out T</span>&gt; </span>&#123;<span class="comment">// Kotlin</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">addAll</span><span class="params">(e: <span class="type">E</span>)</span></span>: T <span class="comment">// æ­£ç¡®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ä¸å˜"><a href="#ä¸å˜" class="headerlink" title="ä¸å˜"></a>ä¸å˜</h2><p>æ²¡æœ‰å…³ç³»çš„å°±æ˜¯ä¸å˜çš„</p>
<h1 id="å£°æ˜å¤„å‹å˜"><a href="#å£°æ˜å¤„å‹å˜" class="headerlink" title="å£°æ˜å¤„å‹å˜"></a>å£°æ˜å¤„å‹å˜</h1><p>å£°æ˜å¤„å‹å˜ä¹Ÿå¯ä»¥ç§°ä¸ºä½¿ç”¨å¤„å‹å˜</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Source</span>&lt;<span class="type">out T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">nextT</span><span class="params">()</span></span>: T</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">test</span><span class="params">(str: <span class="type">Source</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> obj: Source&lt;Any&gt; = str<span class="comment">//åœ¨æ­¤å¤„å£°æ˜äº†ä¸€ä¸ª Any ç±»å‹ï¼Œè¿™å°±å’Œ Java ä¸€æ ·èƒ½åœ¨ä½¿ç”¨å¤„å‘ç”Ÿå‹å˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç±»å‹æŠ•å½±ï¼ˆ-ï¼‰"><a href="#ç±»å‹æŠ•å½±ï¼ˆ-ï¼‰" class="headerlink" title="ç±»å‹æŠ•å½±ï¼ˆ*ï¼‰"></a>ç±»å‹æŠ•å½±ï¼ˆ*ï¼‰</h1><p>å½“ä½ å¯¹å‚æ•°ç±»å‹ä¸€æ— æ‰€çŸ¥çš„æ—¶å€™ï¼Œåˆæƒ³å®‰å…¨çš„ä½¿ç”¨è¿™ä¸ªæ³›å‹ï¼Œä¿é™©çš„æ–¹æ³•å°±æ˜¯å®šä¸€ä¸ªè¯¥æ³›å‹çš„æŠ•å½±ï¼Œæ¯ä¸ªè¯¥æ³›å‹çš„æ­£ç¡®å®ä¾‹éƒ½å°†æ˜¯è¯¥æŠ•å½±çš„å­ç±»ã€‚</p>
<p>Kotlin å¯ä»¥æ ¹æ® * æ‰€æŒ‡ä»£çš„æ³›å‹å‚æ•°è¿›è¡Œç›¸åº”çš„æ˜ å°„ï¼Œçœ‹å®˜æ–¹ä¾‹å­ï¼š</p>
<ul>
<li>å¯¹äº Foo &lt; out T&gt;ï¼Œå…¶ä¸­ T æ˜¯ä¸€ä¸ªå…·æœ‰ä¸Šç•Œçš„<strong>åå˜</strong>ç±»å‹å‚æ•°ï¼ŒFoo &lt;*<em>&gt; ç­‰ä»·äº Foo &lt; out TUpper&gt;ã€‚ è¿™æ„å‘³ç€å½“ T æœªçŸ¥æ—¶ï¼Œä½ å¯ä»¥å®‰å…¨åœ°ä» Foo &lt;</em>&gt; è¯»å– TUpper çš„å€¼ã€‚</li>
</ul>
<blockquote>
<p>Foo&lt;*&gt; = Foo&lt; out T &gt;</p>
</blockquote>
<ul>
<li>å¯¹äº Foo <in t="">ï¼Œå…¶ä¸­ T æ˜¯ä¸€ä¸ª<strong>é€†å˜</strong>ç±»å‹å‚æ•°ï¼ŒFoo&lt;*<em>&gt; ç­‰ä»·äº Foo&lt; in Nothing&gt;ã€‚ è¿™æ„å‘³ç€å½“ T æœªçŸ¥æ—¶ï¼Œä¸èƒ½ä»¥ä»»ä½•æ–¹å¼å®‰å…¨çš„æ–¹å¼å†™å…¥ Foo &lt; </em>&gt;ã€‚</in></li>
</ul>
<blockquote>
<p>Foo&lt;*&gt; = Foo&lt; in T &gt;</p>
</blockquote>
<ul>
<li>å¯¹äº Foo <t>ï¼Œå…¶ä¸­ T æ˜¯ä¸€ä¸ªå…·æœ‰ä¸Šç•Œ TUpper çš„<strong>ä¸å‹å˜</strong>ç±»å‹å‚æ•°ï¼ŒFoo&lt;*&gt; å¯¹äºè¯»å–å€¼æ—¶ç­‰ä»·äº Foo<out tupper=""> è€Œå¯¹äºå†™å€¼æ—¶ç­‰ä»·äº Foo&lt; in Nothing&gt;ã€‚</out></t></li>
</ul>
<blockquote>
<p>Foo&lt;*&gt; = Foo&lt; T &gt;</p>
</blockquote>
<h1 id="Kotlin-æ³›å‹çº¦æŸ"><a href="#Kotlin-æ³›å‹çº¦æŸ" class="headerlink" title="Kotlin æ³›å‹çº¦æŸ"></a>Kotlin æ³›å‹çº¦æŸ</h1><p>åœ¨ Kotlin ç”¨å†’å· : æŒ‡å®šä¸Šç•Œï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="title">sort</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±åªæœ‰ Comparable<t> çš„å­ç±»æ‰èƒ½ä¼ ç»™æ³›å‹ T, ä¹Ÿå°±æ˜¯ List é‡Œçš„ç±»å‹åªèƒ½æ˜¯ Comparable<t> çš„å­ç±»å‹ã€‚</t></t></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sort(listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// Success</span></span><br><span class="line">sort(listOf(HashMap&lt;<span class="built_in">Int</span>, String&gt;()))<span class="comment">//Error HashMap ä¸æ˜¯ Comparable&lt;T&gt; çš„å­ç±»å‹</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å°–æ‹¬å·å†…åªèƒ½å®šä¹‰ä¸€ä¸ªä¸Šç•Œï¼Œå¦‚æœè¦æŒ‡å®šå¤šç§ä¸Šç•Œï¼Œéœ€è¦ç”¨ where è¯­å¥æŒ‡å®šï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">cloneWhenGreater</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">T</span>&gt;, threshold: <span class="type">T</span>)</span></span>: List&lt;T&gt;</span><br><span class="line">    where T : Comparable,</span><br><span class="line">          T : Cloneable &#123;</span><br><span class="line">  <span class="keyword">return</span> list.filter &#123; it &gt; threshold &#125;.map &#123; it.clone() &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><blockquote>
<p>out T ç­‰ä»·äº ? extends T<br>in T ç­‰ä»·äº ? super T<br>* ç­‰ä»·äº ?</p>
</blockquote>
<blockquote>
<p>out T, è¯´æ˜è¿™ä¸ª T åªèƒ½ç”¨äºç”Ÿäº§(é€šå¸¸åªèƒ½ç”¨äºè¿”å›å€¼ç±»å‹)<br>in T, å°±æ˜¯è¿™ä¸ª T åªèƒ½ç”¨äºå‚æ•°ç±»å‹<br>å¯¹åº”ä¸€äº›é»˜è®¤ä¸æ”¯æŒå‹å˜çš„ç±»ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶æ¥å‹å˜å®ƒã€‚åƒ Array<t></t></p>
</blockquote>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/09/16/19-Android Fragment/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Fragment åˆ›å»ºå’Œä¼ å€¼
        
      </div>
    </a>
  
  
    <a href="/2017/09/04/17-ç¬”è®°æœ¬å‡çº§çš„é‚£äº›äº‹/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ç¬”è®°æœ¬ç”µè„‘å‡çº§çš„æ³¨æ„ç‚¹</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<div class="social-share"></div>

	<!--  css & js -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
</div>





<div class="livere">
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <div id="lv-container" data-id="city" data-uid="MTAyMC8yODM1OC80OTMw">
        <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];

           if (typeof LivereTower === 'function') { return; }

           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           e.parentNode.insertBefore(j, e);
       })(document, 'script');
        </script>
    <noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
    </div>
    <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
</div>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2019 ğ‘ºğ’‚ğ’.ğ‘´ğ’
    	</div>
      	<div class="footer-right">
      		<p>
            <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten    
            </p>
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>


<!--ç™¾åº¦ç»Ÿè®¡çš„ä»£ç -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b7e1df5af826817394109f5f7425af1a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  </div>
</body>
</html>